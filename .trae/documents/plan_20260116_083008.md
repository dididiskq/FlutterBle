# 中英文切换逻辑实现计划

## 1. 概述

我将为所有18个页面添加中英文切换功能，参考BMSControlPage的实现方式。

## 2. 实现步骤

### 2.1 更新LanguageManager类

首先，我需要更新LanguageManager类，添加所有页面需要的文本getter方法：

1. 添加所有页面标题的getter
2. 添加所有按钮文本的getter
3. 添加所有其他静态文本的getter

### 2.2 为每个页面添加中英文切换逻辑

对于每个页面，我将执行以下操作：

1. 导入LanguageManager和Provider
2. 使用Consumer<LanguageManager>包裹Scaffold
3. 将页面中的硬编码文本替换为LanguageManager的getter
4. 根据需要添加语言切换按钮

### 2.3 页面列表

需要添加中英文切换功能的页面包括：

1. privacy_policy_page.dart
2. alarm_info_page.dart
3. set_page.dart
4. main_page.dart
5. mine_page.dart
6. firmware_update_page.dart
7. bms_control_page.dart（已实现）
8. scan_page.dart
9. balance_params_page.dart
10. current_params_page.dart
11. system_params_page.dart
12. temperature_params_page.dart
13. voltage_params_page.dart
14. quick_settings_page.dart
15. production_panel_page.dart
16. battery_info_page.dart
17. device_list_page.dart
18. splash_page.dart

## 3. 实现细节

### 3.1 LanguageManager更新

我将为LanguageManager添加以下getter：

- 页面标题：如privacyPolicyTitle, alarmInfoTitle等
- 按钮文本：如saveButtonText, cancelButtonText等
- 其他静态文本：如labels, messages等

### 3.2 页面实现模式

每个页面将采用以下模式：

```dart
class PageName extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Consumer<LanguageManager>(
      builder: (context, languageManager, child) {
        return Scaffold(
          appBar: AppBar(
            title: Text(languageManager.pageTitle),
          ),
          body: // 页面内容，使用languageManager.getter获取文本
        );
      },
    );
  }
}
```

### 3.3 通用AppBar组件

我将更新CommonAppBar组件，使其支持中英文切换：

```dart
class CommonAppBar extends StatelessWidget implements PreferredSizeWidget {
  final String titleKey; // 使用key来获取不同页面的标题
  
  // 实现代码
}
```

## 4. 注意事项

1. 确保所有页面都使用Consumer<LanguageManager>包裹
2. 确保所有文本都通过LanguageManager的getter获取
3. 确保语言切换按钮的功能正常
4. 确保页面布局在不同语言下都能正常显示
5. 确保隐私政策等重要内容的翻译准确

## 5. 测试

实现完成后，我将测试所有页面的中英文切换功能，确保：

1. 语言切换按钮正常工作
2. 所有文本都能正确切换
3. 页面布局在不同语言下都能正常显示
4. 没有编译错误

## 6. 预期效果

所有页面都将支持中英文切换，用户可以通过语言切换按钮轻松切换语言，所有文本都将根据当前语言显示相应的内容。

