## 修复Flutter OTA镜像数据传输失败问题

### 问题根因
Flutter代码在创建镜像传输命令后，**没有等待设备响应确认**就立即发送数据，导致设备未准备好接收数据，GATT写入失败。

### 修改文件
- `lib/bluetooth/ota_upgrader.dart` - 修改`_sendImageData`方法（第700-832行）

### 具体修改

1. **修改`_createOtaImageTransfer`方法**（第653-698行）
   - 改为等待设备响应后再返回
   - 添加响应监听和超时控制

2. **修改`_sendImageData`方法**（第700-832行）
   - 在发送镜像数据前，确保设备已准备好（等待create_ota_image_transfer的响应）
   - 调整数据发送流程：创建传输 → 等待响应 → 发送数据 → 等待完成
   - 与Java流程保持一致的时序控制

### 预期效果
- 修复GATT写入失败问题
- 确保设备准备好后再发送数据
- 提高OTA升级的可靠性和成功率