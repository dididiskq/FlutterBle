## 优化断开连接逻辑方案

### 问题分析
1. 当前断开连接实现仅取消连接流订阅，没有更主动的断开方式
2. 可能存在资源清理不彻底的情况
3. 状态重置可能不完整
4. 缺少断开连接的状态检查和确认

### 优化方案

#### 1. 改进BleController的disconnectFromDevice方法
- 确保彻底清理所有资源
- 添加主动断开连接的机制
- 增强状态重置逻辑
- 添加断开连接的状态检查

#### 2. 优化DeviceListPage的断开连接逻辑
- 确保UI状态正确更新
- 添加断开连接的反馈
- 改进错误处理

### 实现步骤

1. **修改BleController.disconnectFromDevice方法**
   - 添加更主动的断开连接逻辑
   - 确保所有流订阅都被正确取消
   - 重置所有相关状态
   - 添加断开连接的状态确认

2. **修改DeviceListPage._disconnectConnectedDevice方法**
   - 改进错误处理
   - 添加断开连接的反馈
   - 确保UI状态正确更新

3. **添加断开连接的状态检查**
   - 确保设备确实断开连接
   - 添加断开连接的超时处理

### 代码修改点

1. **BleController.disconnectFromDevice方法**
   - 增强资源清理逻辑
   - 添加断开连接的状态确认
   - 改进错误处理

2. **DeviceListPage._disconnectConnectedDevice方法**
   - 改进错误处理
   - 添加断开连接的反馈
   - 确保UI状态正确更新

### 预期效果
1. 断开连接成功率提高
2. 断开连接后所有状态正确重置
3. UI状态及时更新
4. 提供明确的断开连接反馈
5. 避免断开失败的情况

### 测试要点
1. 连接设备后点击断开按钮
2. 检查设备是否成功断开
3. 检查UI状态是否正确更新
4. 检查是否有明确的断开连接反馈
5. 多次连接断开测试，确保稳定性